<!DOCTYPE html>
<html>

<head>
  <title>Kansas Catalog</title>
</head>

<body>

  <h1 id="demo"></h1>

  <h2>Catalog Entries:</h2>

  <p id="catalog"></p>


<script>
var xmlhttp = new XMLHttpRequest();
var url = "https://raw.githubusercontent.com/kansasgis/CatalogAPI/master/DASC_Catalog.json";

xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        var myArr = JSON.parse(xmlhttp.responseText);
        myFunction(myArr);
        populateEntries(myArr);
    }
};
xmlhttp.open("GET", url, true);
xmlhttp.send();

function myFunction(arr) {
var out = arr.catalog.title;
document.getElementById("demo").innerHTML = out;
}

function populateEntries(arr) {
var bigOut = "";
var i;
for(i = 0; i < arr.catalog.catalogEntries.length; i++){
bigOut += '<p><b>' + arr.catalog.catalogEntries[i].Title +
'</b> (WKID: ' + arr.catalog.catalogEntries[i].Projection + ')<br>' +
arr.catalog.catalogEntries[i].Description + '<br> Data Creator: ' + arr.catalog.catalogEntries[i].DataCreator +
', <a href="' + arr.catalog.catalogEntries[i].WebLink + '">Permalink</a><br>';

if (arr.catalog.catalogEntries[i].MetadataLink != "") {
	bigOut += '<a href="' + arr.catalog.catalogEntries[i].MetadataLink + '">Full Metadata</a><br><br>'}

if (arr.catalog.catalogEntries[i].DownloadLink.length > 0) {
bigOut += 'Data Downloads: <br>';
var ddi;
for(ddi = 0; ddi < arr.catalog.catalogEntries[i].DownloadLink.length; ddi++){
bigOut += '<a href="' + arr.catalog.catalogEntries[i].DownloadLink[ddi].url + '">'
+ arr.catalog.catalogEntries[i].DownloadLink[ddi].DataTitle + ': ' + arr.catalog.catalogEntries[i].DownloadLink[ddi].DataType + '</a><br>' }
bigOut += '<br>'}

if (arr.catalog.catalogEntries[i].ServiceLink.length > 0) {
bigOut += 'Web Services: <br>';
var s;
for(s = 0; s < arr.catalog.catalogEntries[i].ServiceLink.length; s++){
bigOut += '<a href="' + arr.catalog.catalogEntries[i].ServiceLink[s] + '">' + arr.catalog.catalogEntries[i].ServiceLink[s] + '</a><br>';}
bigOut += '<br>'}

if (arr.catalog.catalogEntries[i].Documentation.length > 0) {
bigOut += 'Documentation: <br>';
var d;
for(d = 0; d < arr.catalog.catalogEntries[i].Documentation.length; d++){
bigOut += '<a href="' + arr.catalog.catalogEntries[i].Documentation[d] + '">' + arr.catalog.catalogEntries[i].Documentation[d] + '</a><br>';}
bigOut += '<br>'}

bigOut += '</p>';
}
document.getElementById("catalog").innerHTML = bigOut;
}
</script>
</body>
</html>